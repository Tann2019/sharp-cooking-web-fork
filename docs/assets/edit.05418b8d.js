import{d as b,u as C,e as M,f as R,g as V,r as h,o as S,h as B,i as U,j,s as I,k as N,n as z,c as a,l as t,w as u,v as d,F as v,m,a as r,b as g}from"./index.1ef6c557.js";import{R as A,a as H}from"./recipeViewModel.4fa257ec.js";const $={class:"mt-16 mx-4 mb-10 dark:text-white"},O={key:0,class:"rounded-lg grid place-items-center w-full h-80 overflow-hidden"},D=["src"],F={key:1,class:"bg-theme-primary rounded-lg grid place-items-center w-full h-80 overflow-hidden"},J=t("svg",{class:"h-16 w-16 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),t("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),t("polyline",{points:"21 15 16 10 5 21"})],-1),L=[J],P=t("label",{for:"title"},"Title",-1),T=t("label",null,"Score",-1),E=t("label",null,"Ingredients",-1),q=t("svg",{class:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),G=[q],K={class:"flex my-3 w-full"},Q=["onUpdate:modelValue"],W=["onClick"],X=g('<svg class="h-4 w-4 text-white" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"></path><line x1="4" y1="7" x2="20" y2="7"></line><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path></svg>',1),Y=[X],Z=t("label",null,"Steps",-1),ee=t("svg",{class:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),te=[ee],le={class:"flex my-3 w-full"},se=["onUpdate:modelValue"],oe=["onClick"],ne=g('<svg class="h-4 w-4 text-white" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"></path><line x1="4" y1="7" x2="20" y2="7"></line><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path></svg>',1),ie=[ne],ae=t("label",null,"Notes",-1),ce=b({setup(re){const p=C(),w=M(),f=R(),c=V(()=>parseInt(w.params.id)),e=h({id:1,title:"",score:3,ingredients:[],steps:[],notes:"",image:"",imageAvailable:!1}),k=h([]);S(async()=>{p.menuOptions=[{text:"Save",action:x,svg:'<path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" />  <polyline points="17 21 17 13 7 13 7 21" />  <polyline points="7 3 7 8 15 8" />'}];let s;if(c.value===0?(s=new A,s.steps.push(""),s.ingredients.push("")):s=await B(c.value),s){p.title=s.title;const l=await U(c.value);l.length>0&&(k.value=l,s.image=l[0].image,s.imageAvailable=!!s.image),e.value=s}});async function x(){const s=!e.value.id;s&&(e.value.id=await j());const l=JSON.parse(JSON.stringify(e.value));await I(l),e.value.image&&await N(new H(l.id,e.value.image)),s&&f.replace(`/recipe/${e.value.id}/edit`),z({group:"success",title:"Success",text:"Saved successfully!"},2e3)}async function _(s){s&&s.length>0&&(e.value.image=await y(s[0]),e.value.imageAvailable=!!e.value.image)}function y(s){return new Promise((l,o)=>{const n=new FileReader;n.readAsDataURL(s),n.onload=()=>l(n.result),n.onerror=i=>o(i)})}return(s,l)=>(r(),a("div",$,[t("div",null,[e.value.imageAvailable?(r(),a("div",O,[t("img",{src:e.value.image,class:"rounded-lg object-contain"},null,8,D)])):(r(),a("div",F,L)),t("input",{type:"file",onChange:l[0]||(l[0]=o=>_(o.target.files)),accept:"image/*"},null,32)]),P,u(t("input",{id:"title",type:"text","onUpdate:modelValue":l[1]||(l[1]=o=>e.value.title=o),class:"block p-2 w-full rounded text-black"},null,512),[[d,e.value.title]]),T,u(t("input",{type:"number","onUpdate:modelValue":l[2]||(l[2]=o=>e.value.score=o),class:"block p-2 w-full rounded text-black"},null,512),[[d,e.value.score,void 0,{number:!0}]]),E,t("button",{class:"ml-2 align-middle",type:"button",onClick:l[3]||(l[3]=o=>e.value.ingredients.push(""))},G),(r(!0),a(v,null,m(e.value.ingredients,(o,n)=>(r(),a("div",K,[u(t("input",{type:"text",placeholder:"1 cup flour","onUpdate:modelValue":i=>e.value.ingredients[n]=i,class:"block p-2 rounded flex-auto text-black"},null,8,Q),[[d,e.value.ingredients[n]]]),t("button",{type:"button",class:"ml-2 align-middle",onClick:i=>e.value.ingredients.splice(n,1)},Y,8,W)]))),256)),Z,t("button",{class:"ml-2",type:"button",onClick:l[4]||(l[4]=o=>e.value.steps.push(""))},te),(r(!0),a(v,null,m(e.value.steps,(o,n)=>(r(),a("div",le,[u(t("input",{type:"text",placeholder:"Preheat oven to 350 F","onUpdate:modelValue":i=>e.value.steps[n]=i,class:"block p-2 flex-auto rounded text-black"},null,8,se),[[d,e.value.steps[n]]]),t("button",{type:"button",class:"ml-2",onClick:i=>e.value.steps.splice(n,1)},ie,8,oe)]))),256)),ae,u(t("textarea",{"onUpdate:modelValue":l[5]||(l[5]=o=>e.value.notes=o),class:"block p-2 flex-auto w-full h-20 bg-white rounded text-base text-black"},null,512),[[d,e.value.notes]])]))}});export{ce as default};
