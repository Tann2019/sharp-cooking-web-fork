import{d as w,u as C,f as S,g as V,r as p,o as M,h as R,i as U,c as u,e as t,t as B,w as r,v as d,F as h,j as m,a as c,s as I,k as N,b as g}from"./index.77741ca4.js";import{a as $}from"./recipe.6c369b61.js";const j={class:"mt-16 mx-4 dark:text-white"},A={class:"dark:text-white"},D=["src"],z=t("label",null,"Title",-1),E=t("label",null,"Score",-1),F=t("label",null,"Ingredients",-1),H={class:"flex my-3"},J=["onUpdate:modelValue"],L=["onClick"],O=g('<svg class="h-4 w-4 text-white" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"></path><line x1="4" y1="7" x2="20" y2="7"></line><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path></svg>',1),P=[O],T=t("label",null,"Steps",-1),q={class:"flex my-3"},G=["onUpdate:modelValue"],K=["onClick"],Q=g('<svg class="h-4 w-4 text-white" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"></path><line x1="4" y1="7" x2="20" y2="7"></line><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path></svg>',1),W=[Q],X=t("label",null,"Notes",-1),te=w({setup(Y){const k=C(),_=S(),v=V(()=>parseInt(_.params.id)),e=p({id:1,title:"",score:3,ingredients:[],steps:[],notes:""}),i=p(""),x=p([]);M(async()=>{const s=await R(v.value);if(s){e.value=s,k.title=s.title+" Edit";const l=await U(v.value);l.length>0&&(x.value=l,i.value=l[0].image)}});async function y(){const s=JSON.parse(JSON.stringify(e.value));await I(s),i.value&&await N(new $(s.id,i.value))}async function b(s){s&&s.length>0&&(i.value=await f(s[0]))}function f(s){return new Promise((l,n)=>{const a=new FileReader;a.readAsDataURL(s),a.onload=()=>l(a.result),a.onerror=o=>n(o)})}return(s,l)=>(c(),u("div",j,[t("span",A,B(e.value.title),1),t("button",{type:"button",onClick:y},"Save"),t("div",null,[t("img",{src:i.value,width:"320"},null,8,D),t("input",{type:"file",onChange:l[0]||(l[0]=n=>b(n.target.files)),accept:"image/*"},null,32)]),z,r(t("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=n=>e.value.title=n),class:"block p-2 rounded text-black"},null,512),[[d,e.value.title]]),E,r(t("input",{type:"number","onUpdate:modelValue":l[2]||(l[2]=n=>e.value.score=n),class:"block p-2 rounded text-black"},null,512),[[d,e.value.score,void 0,{number:!0}]]),F,t("button",{onClick:l[3]||(l[3]=n=>e.value.ingredients.push(""))},"Add"),(c(!0),u(h,null,m(e.value.ingredients,(n,a)=>(c(),u("div",H,[r(t("input",{type:"text",placeholder:"1 cup flour","onUpdate:modelValue":o=>e.value.ingredients[a]=o,class:"block p-2 rounded text-black"},null,8,J),[[d,e.value.ingredients[a]]]),t("button",{class:"ml-2",onClick:o=>e.value.ingredients.splice(a,1)},P,8,L)]))),256)),T,t("button",{onClick:l[4]||(l[4]=n=>e.value.steps.push(""))},"Add"),(c(!0),u(h,null,m(e.value.steps,(n,a)=>(c(),u("div",q,[r(t("input",{type:"text",placeholder:"Preheat oven to 350 F","onUpdate:modelValue":o=>e.value.steps[a]=o,class:"block p-2 rounded text-black"},null,8,G),[[d,e.value.steps[a]]]),t("button",{class:"ml-2",onClick:o=>e.value.steps.splice(a,1)},W,8,K)]))),256)),X,r(t("input",{type:"text","onUpdate:modelValue":l[5]||(l[5]=n=>e.value.notes=n),class:"block p-2 rounded text-black"},null,512),[[d,e.value.notes]])]))}});export{te as default};
