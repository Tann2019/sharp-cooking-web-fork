import{d as b,u as C,e as M,f as R,g as V,r as h,o as B,h as S,i as U,j,s as I,k as N,c as a,l as t,w as u,v as d,F as v,m,a as r,b as g}from"./index.a2d1ad4c.js";import{R as z,a as A}from"./recipeViewModel.4fa257ec.js";const H={class:"mt-16 mx-4 mb-10 dark:text-white"},$={key:0,class:"rounded-lg grid place-items-center w-full h-80 overflow-hidden"},O=["src"],D={key:1,class:"bg-theme-primary rounded-lg grid place-items-center w-full h-80 overflow-hidden"},F=t("svg",{class:"h-16 w-16 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),t("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),t("polyline",{points:"21 15 16 10 5 21"})],-1),J=[F],L=t("label",{for:"title"},"Title",-1),P=t("label",null,"Score",-1),T=t("label",null,"Ingredients",-1),E=t("svg",{class:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),q=[E],G={class:"flex my-3 w-full"},K=["onUpdate:modelValue"],Q=["onClick"],W=g('<svg class="h-4 w-4 text-white" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"></path><line x1="4" y1="7" x2="20" y2="7"></line><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path></svg>',1),X=[W],Y=t("label",null,"Steps",-1),Z=t("svg",{class:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),ee=[Z],te={class:"flex my-3 w-full"},le=["onUpdate:modelValue"],se=["onClick"],oe=g('<svg class="h-4 w-4 text-white" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"></path><line x1="4" y1="7" x2="20" y2="7"></line><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path></svg>',1),ne=[oe],ie=t("label",null,"Notes",-1),de=b({setup(ae){const p=C(),w=M(),f=R(),c=V(()=>parseInt(w.params.id)),e=h({id:1,title:"",score:3,ingredients:[],steps:[],notes:"",image:"",imageAvailable:!1}),k=h([]);B(async()=>{p.menuOptions=[{text:"Save",action:_,svg:'<path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" />  <polyline points="17 21 17 13 7 13 7 21" />  <polyline points="7 3 7 8 15 8" />'}];let s;if(c.value===0?(s=new z,s.steps.push(""),s.ingredients.push("")):s=await S(c.value),s){p.title=s.title;const l=await U(c.value);l.length>0&&(k.value=l,s.image=l[0].image,s.imageAvailable=!!s.image),e.value=s}});async function _(){const s=!e.value.id;s&&(e.value.id=await j());const l=JSON.parse(JSON.stringify(e.value));await I(l),e.value.image&&await N(new A(l.id,e.value.image)),s&&f.replace(`/recipe/${e.value.id}/edit`)}async function x(s){s&&s.length>0&&(e.value.image=await y(s[0]),e.value.imageAvailable=!!e.value.image)}function y(s){return new Promise((l,o)=>{const n=new FileReader;n.readAsDataURL(s),n.onload=()=>l(n.result),n.onerror=i=>o(i)})}return(s,l)=>(r(),a("div",H,[t("div",null,[e.value.imageAvailable?(r(),a("div",$,[t("img",{src:e.value.image,class:"rounded-lg object-contain"},null,8,O)])):(r(),a("div",D,J)),t("input",{type:"file",onChange:l[0]||(l[0]=o=>x(o.target.files)),accept:"image/*"},null,32)]),L,u(t("input",{id:"title",type:"text","onUpdate:modelValue":l[1]||(l[1]=o=>e.value.title=o),class:"block p-2 w-full rounded text-black"},null,512),[[d,e.value.title]]),P,u(t("input",{type:"number","onUpdate:modelValue":l[2]||(l[2]=o=>e.value.score=o),class:"block p-2 w-full rounded text-black"},null,512),[[d,e.value.score,void 0,{number:!0}]]),T,t("button",{class:"ml-2 align-middle",type:"button",onClick:l[3]||(l[3]=o=>e.value.ingredients.push(""))},q),(r(!0),a(v,null,m(e.value.ingredients,(o,n)=>(r(),a("div",G,[u(t("input",{type:"text",placeholder:"1 cup flour","onUpdate:modelValue":i=>e.value.ingredients[n]=i,class:"block p-2 rounded flex-auto text-black"},null,8,K),[[d,e.value.ingredients[n]]]),t("button",{type:"button",class:"ml-2 align-middle",onClick:i=>e.value.ingredients.splice(n,1)},X,8,Q)]))),256)),Y,t("button",{class:"ml-2",type:"button",onClick:l[4]||(l[4]=o=>e.value.steps.push(""))},ee),(r(!0),a(v,null,m(e.value.steps,(o,n)=>(r(),a("div",te,[u(t("input",{type:"text",placeholder:"Preheat oven to 350 F","onUpdate:modelValue":i=>e.value.steps[n]=i,class:"block p-2 flex-auto rounded text-black"},null,8,le),[[d,e.value.steps[n]]]),t("button",{type:"button",class:"ml-2",onClick:i=>e.value.steps.splice(n,1)},ne,8,se)]))),256)),ie,u(t("textarea",{"onUpdate:modelValue":l[5]||(l[5]=o=>e.value.notes=o),class:"block p-2 flex-auto w-full h-20 bg-white rounded text-base text-black"},null,512),[[d,e.value.notes]])]))}});export{de as default};
