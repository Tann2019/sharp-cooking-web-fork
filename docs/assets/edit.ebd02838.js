import{d as b,u as y,f as C,g as M,r as v,o as V,h as B,i as R,s as S,j as U,c as i,e as t,k as I,w as r,v as d,F as h,l as m,a as u,b as g}from"./index.d17f5ecd.js";import{a as N}from"./recipe.6c369b61.js";const j={class:"mt-16 mx-4 mb-10 dark:text-white"},z=["src"],H=t("label",{for:"title"},"Title",-1),A=t("label",null,"Score",-1),$=t("label",null,"Ingredients",-1),O=t("svg",{class:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),D=[O],F={class:"flex my-3 w-full"},J=["onUpdate:modelValue"],L=["onClick"],P=g('<svg class="h-4 w-4 text-white" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"></path><line x1="4" y1="7" x2="20" y2="7"></line><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path></svg>',1),T=[P],E=t("label",null,"Steps",-1),q=t("svg",{class:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),G=[q],K={class:"flex my-3 w-full"},Q=["onUpdate:modelValue"],W=["onClick"],X=g('<svg class="h-4 w-4 text-white" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"></path><line x1="4" y1="7" x2="20" y2="7"></line><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path></svg>',1),Y=[X],Z=t("label",null,"Notes",-1),se=b({setup(ee){const c=y(),k=C(),p=M(()=>parseInt(k.params.id)),e=v({id:1,title:"",score:3,ingredients:[],steps:[],notes:"",image:"",imageAvailable:!1}),f=v([]);V(async()=>{c.menuOptions=[{text:"Save",action:x,svg:'<path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" />  <polyline points="17 21 17 13 7 13 7 21" />  <polyline points="7 3 7 8 15 8" />'}];const s=await B(p.value);if(s){c.title=s.title;const l=await R(p.value);l.length>0&&(f.value=l,s.image=l[0].image,s.imageAvailable=!!s.image),e.value=s}});async function x(){const s=JSON.parse(JSON.stringify(e.value));await S(s),e.value.image&&await U(new N(s.id,e.value.image))}async function w(s){s&&s.length>0&&(e.value.image=await _(s[0]))}function _(s){return new Promise((l,o)=>{const a=new FileReader;a.readAsDataURL(s),a.onload=()=>l(a.result),a.onerror=n=>o(n)})}return(s,l)=>(u(),i("div",j,[t("div",null,[e.value.imageAvailable?(u(),i("img",{key:0,src:e.value.image,class:"w-full rounded-lg h-80"},null,8,z)):I("",!0),t("input",{type:"file",onChange:l[0]||(l[0]=o=>w(o.target.files)),accept:"image/*"},null,32)]),H,r(t("input",{id:"title",type:"text","onUpdate:modelValue":l[1]||(l[1]=o=>e.value.title=o),class:"block p-2 w-full rounded text-black"},null,512),[[d,e.value.title]]),A,r(t("input",{type:"number","onUpdate:modelValue":l[2]||(l[2]=o=>e.value.score=o),class:"block p-2 w-full rounded text-black"},null,512),[[d,e.value.score,void 0,{number:!0}]]),$,t("button",{class:"ml-2 align-middle",type:"button",onClick:l[3]||(l[3]=o=>e.value.ingredients.push(""))},D),(u(!0),i(h,null,m(e.value.ingredients,(o,a)=>(u(),i("div",F,[r(t("input",{type:"text",placeholder:"1 cup flour","onUpdate:modelValue":n=>e.value.ingredients[a]=n,class:"block p-2 rounded flex-auto text-black"},null,8,J),[[d,e.value.ingredients[a]]]),t("button",{type:"button",class:"ml-2 align-middle",onClick:n=>e.value.ingredients.splice(a,1)},T,8,L)]))),256)),E,t("button",{class:"ml-2",type:"button",onClick:l[4]||(l[4]=o=>e.value.steps.push(""))},G),(u(!0),i(h,null,m(e.value.steps,(o,a)=>(u(),i("div",K,[r(t("input",{type:"text",placeholder:"Preheat oven to 350 F","onUpdate:modelValue":n=>e.value.steps[a]=n,class:"block p-2 flex-auto rounded text-black"},null,8,Q),[[d,e.value.steps[a]]]),t("button",{type:"button",class:"ml-2",onClick:n=>e.value.steps.splice(a,1)},Y,8,W)]))),256)),Z,r(t("textarea",{"onUpdate:modelValue":l[5]||(l[5]=o=>e.value.notes=o),class:"block p-2 flex-auto w-full h-20 bg-white rounded text-base text-black"},null,512),[[d,e.value.notes]])]))}});export{se as default};
